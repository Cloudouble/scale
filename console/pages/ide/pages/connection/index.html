<h2>Connection</h2>
<fieldset name="search">
    <h3>Search</h3>
    <input name="search" type="search" placeholder="uuid or name search..." autocomplete="off" list="ide-connection-search-list" live-trigger="keyup:IdeConnectionSearch" />
    <button name="load" live-trigger="click:IdeConnectionSearch">Load</button>
    <datalist id="ide-connection-search-list"></datalist>
</fieldset>
<fieldset name="configure" live-subscription="IdeConnectionSearch:IdeConnectionConfigure">
    <h3>Configure</h3>
    <label>
        Connection @name (optional)
        <input name="@name" type="text" autocomplete="off" live-trigger="change:IdeConnectionConfigure" />
    </label>
    <label>
        Connection ID
        <input name="id" type="uuid" readonly="readonly" />
    </label>
    <button name="create" live-trigger="click:IdeConnectionConfigure">Create</button>
    <button name="delete" live-trigger="click:IdeConnectionConfigure">Delete</button>
    <details class="snippet-container">
        <summary>Snippet</summary>
        <div class="snippet">
window.fetch(
    '${window.localStorage.getItem('system:system_access_url')}${window.localStorage.getItem('system:system_root')}/connection/${window.localStorage.getItem('system:connection_id')}/connection/${window.LiveElement.Scale.Console.IDE.Connection.Configure.connection_id}/connect.json', 
    {
        method: 'PUT', 
        headers: {
            "Content-Type": "application/json"
        }, 
        body: JSON.stringify({
            ${JSON.stringify(window.LiveElement.Scale.Console.IDE.Connection.Configure.connection, null, 20).slice(1, -1)}
        }) 
    }
)
        </div>
    </details>
</fieldset>
<fieldset name="code" live-subscription="IdeConnectionSearch:IdeConnectionCode">
    <h3>Code</h3>
    <label>
        Receive URL
        <input name="receive_url" type="url" readonly="readonly" />
        <details class="snippet-container">
            <summary>Snippet</summary>
            <div class="snippet">
var socket = new WebSocket('${window.LiveElement.Scale.Console.IDE.Connection.Code.receive_url}')
            </div>
        </details>
    </label>
    <label>
        Send URL
        <input name="send_url" type="url" readonly="readonly" />
        <details class="snippet-container">
            <summary>Snippet</summary>
            <div class="snippet">
window.fetch(
    '${window.LiveElement.Scale.Console.IDE.Connection.Code.send_url}', 
    {
        method: 'POST', 
        body: JSON.stringify(data)
    }
)
            </div>
        </details>
    </label>
</fieldset>
<fieldset name="test">
    <h3>Test</h3>
    <label>
        Send Data
        <input type="text" name="send" placeholder="Type and then press 'Enter' to send..." live-trigger="change:IdeConnectionTest" />
    </label>
    <label>
        Received Data
        <textarea name="receive" readonly="readonly" live-subscription="IdeConnectionTest:IdeConnectionTest"></textarea>
    </label>
</fieldset>